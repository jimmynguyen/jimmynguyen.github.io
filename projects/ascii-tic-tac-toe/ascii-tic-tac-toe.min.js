var __extends=(this&&this.__extends)||(function(){var a=function(e,c){a=Object.setPrototypeOf||({__proto__:[]} instanceof Array&&function(g,f){g.__proto__=f
})||function(h,f){for(var g in f){if(f.hasOwnProperty(g)){h[g]=f[g]}}};return a(e,c)
};return function(f,c){a(f,c);function e(){this.constructor=f}f.prototype=c===null?Object.create(c):(e.prototype=c.prototype,new e())
}})();var RenderElement=(function(){function a(d,c,b){if(d===void 0){d=null}if(c===void 0){c=null
}if(b===void 0){b=null}this.id=d;this.content=c;this.parent=b}a.prototype.update=function(){if(this.id){$("#".concat(this.id)).html(this.render())
}if(this.parent){this.parent.update()}};a.prototype.render=function(){this.str="";
var b=this.getContent();if(b){this.str+=b}return this.str};a.prototype.getContent=function(){return this.content
};a.prototype.setContent=function(b){this.content=b};a.prototype.getId=function(){return this.id
};a.prototype.getParent=function(){return this.parent};return a}());var RenderArea=(function(b){__extends(a,b);
function a(e,c){if(e===void 0){e=null}if(c===void 0){c=null}var d=b.call(this,e,null,c)||this;
d.elements=[];d.links=[];return d}a.getBrTagElement=function(c){if(c===void 0){c=null
}return new RenderTagElement(null,null,c,RenderTagElementType.BR)};a.prototype.render=function(){var c=this;
this.str="";this.elements.forEach(function(d){c.str+=d.render()});return this.str
};a.prototype.addElements=function(){var e=this;var d=[];for(var c=0;c<arguments.length;
c++){d[c]=arguments[c]}d.forEach(function(f){return e.elements.push(f)})};a.prototype.removeAllElements=function(){this.elements=[]
};a.prototype.addLinks=function(){var e=this;var c=[];for(var d=0;d<arguments.length;
d++){c[d]=arguments[d]}c.forEach(function(f){return e.links.push(f)})};a.prototype.removeAllLinks=function(){this.links=[]
};a.prototype.runLinks=function(){for(var c=0;c<this.links.length;c++){this.links[c].run()
}for(var c=0;c<this.elements.length;c++){if(this.elements[c] instanceof a){var d=this.elements[c];
d.runLinks()}}};return a}(RenderElement));var Board=(function(b){__extends(a,b);function a(c){if(c===void 0){c=null
}var d=b.call(this,null,c)||this;d.reset();return d}a.prototype.toArray=function(){return this.squares.map(function(c){return c.sign==TicTacToeSign.NO_SIGN?c.index:c.sign
})};a.prototype.reset=function(){this.removeAllElements();this.removeAllLinks();this.squares=[];
for(var g=0;g<a.NUM_ROWS;g++){var f=new Row(this);for(var d=0;d<a.NUM_COLS;d++){var c=(g*a.NUM_COLS)+d;
var e=new Square(f,c);f.addSquare(e);this.squares.push(e)}this.addElements(f);if(g!=a.NUM_ROWS-1){this.addElements(new RowSeparator())
}}this.update()};a.NUM_ROWS=3;a.NUM_COLS=3;return a}(RenderArea));var CallbackCollection=(function(){function a(){var b=[];
for(var c=0;c<arguments.length;c++){b[c]=arguments[c]}this.callbacks=[];this.callbacks=b
}a.prototype.addCallback=function(b){this.callbacks.push(b);return this};a.prototype.fire=function(){for(var b=0;
b<this.callbacks.length;b++){this.callbacks[b]()}};a.prototype.reset=function(){this.callbacks=[]
};return a}());var Content=(function(b){__extends(a,b);function a(){var c=b.call(this,"content")||this;
c.board=new Board(c);c.resetButton=new ResetButton(c);c.status=new Status(c);c.addElements(c.status,RenderArea.getBrTagElement(),RenderArea.getBrTagElement(),c.board,RenderArea.getBrTagElement(),RenderArea.getBrTagElement(),c.resetButton);
c.addLinks(new RenderLinkClick("#".concat(c.resetButton.getId()),new CallbackCollection(c.reset.bind(c))));
c.update();return c}a.prototype.update=function(){b.prototype.update.call(this);this.runLinks()
};a.prototype.getStatus=function(){return this.status};a.prototype.reset=function(){this.board.reset();
this.status.reset()};return a}(RenderArea));var Game=(function(){function a(){this.title=new Title();
this.content=new Content()}return a}());var MinimaxAlgorithm=(function(){function a(){}a.run=function(j,d){var g=this.emptyIndices(j);
if(this.winning(j,TicTacToeSign.X)){return new MinimaxAlgorithmReturnValue(null,-10)
}else{if(this.winning(j,TicTacToeSign.O)){return new MinimaxAlgorithmReturnValue(null,10)
}else{if(g.length===0){return new MinimaxAlgorithmReturnValue(null,0)}}}var b=[];
for(var h=0;h<g.length;h++){var f=new MinimaxAlgorithmReturnValue(j[g[h]]);j[g[h]]=d;
var k=this.run(j,d==TicTacToeSign.O?TicTacToeSign.X:TicTacToeSign.O);f.score=k.score;
j[g[h]]=f.index;b.push(f)}var c;var e;if(d===TicTacToeSign.O){e=-10000;for(var h=0;
h<b.length;h++){if(b[h].score>e){e=b[h].score;c=h}}}else{e=10000;for(var h=0;h<b.length;
h++){if(b[h].score<e){e=b[h].score;c=h}}}return b[c]};a.winning=function(c,b){return((c[0]==b)&&(c[1]==b)&&(c[2]==b))||((c[3]==b)&&(c[4]==b)&&(c[5]==b))||((c[6]==b)&&(c[7]==b)&&(c[8]==b))||((c[0]==b)&&(c[3]==b)&&(c[6]==b))||((c[1]==b)&&(c[4]==b)&&(c[7]==b))||((c[2]==b)&&(c[5]==b)&&(c[8]==b))||((c[0]==b)&&(c[4]==b)&&(c[8]==b))||((c[2]==b)&&(c[4]==b)&&(c[6]==b))
};a.emptyIndices=function(b){return b.filter(function(c){return(c!=TicTacToeSign.X)&&(c!=TicTacToeSign.O)
})};return a}());var MinimaxAlgorithmReturnValue=(function(){function a(b,c){if(b===void 0){b=null
}if(c===void 0){c=null}this.index=b;this.score=c}return a}());var RenderClass=(function(){function a(b){this.classType=b
}a.prototype.toString=function(){return this.classType};a.prototype.getClassType=function(){return this.classType
};return a}());var RenderClassType;(function(a){a.ASCII_REAL_BUTTON="asciiRealButton";
a.CURSOR_NOT_ALLOWED="cursorNotAllowed";a.CURSOR_POINTER="cursorPointer";a.SQUARE="square"
})(RenderClassType||(RenderClassType={}));var RenderLink=(function(){function a(){}a.prototype.run=function(){};
return a}());var RenderLinkClick=(function(b){__extends(a,b);function a(c,d){var e=b.call(this)||this;
e.element=c;e.callbackCollection=d;return e}a.prototype.run=function(){var c=this;
$(this.element).click(function(d){c.callbackCollection.fire();return false})};return a
}(RenderLink));var RenderTagElement=(function(b){__extends(a,b);function a(j,f,d,e,i){if(j===void 0){j=null
}if(f===void 0){f=null}if(d===void 0){d=null}if(i===void 0){i=false}var c=[];for(var g=5;
g<arguments.length;g++){c[g-5]=arguments[g]}var h=b.call(this,j,f,d)||this;h.tagType=e;
h.hasClosingTag=i;h.classes=c.map(function(k){return new RenderClass(k)});return h
}a.prototype.render=function(){return this.openTag().appendId().appendClasses().closeTag().appendContent().appendClosingTag().toString()
};a.prototype.getTagType=function(){return this.tagType};a.prototype.addClass=function(c){if(this.hasClass(c)){return false
}this.classes.push(new RenderClass(c));return true};a.prototype.removeClass=function(c){if(!this.hasClass(c)){return false
}this.classes=this.classes.filter(function(d){return d.getClassType()!=c});return true
};a.prototype.hasClass=function(c){return this.classes.filter(function(d){return d.getClassType()==c
}).length>0};a.prototype.openTag=function(){this.str="";var c=this.getTagType();if(c){this.str+="<".concat(c)
}return this};a.prototype.appendId=function(){if(this.id){this.str+=' id="'.concat(this.id.toString()).concat('"')
}return this};a.prototype.appendClasses=function(){if(this.classes.length>0){this.str+=' class="';
for(var c=0;c<this.classes.length;c++){this.str+=this.classes[c].toString();if(c!=this.classes.length-1){this.str+=" "
}}this.str+='"'}return this};a.prototype.closeTag=function(){this.str+=">";return this
};a.prototype.appendContent=function(){var c=this.getContent();if(c){this.str+=c}return this
};a.prototype.appendClosingTag=function(){if(this.hasClosingTag){this.str+="</".concat(this.tagType).concat(">")
}return this};a.prototype.toString=function(){return this.str};return a}(RenderElement));
var RenderTagElementType;(function(a){a.SPAN="span";a.BR="br"})(RenderTagElementType||(RenderTagElementType={}));
var ResetButton=(function(a){__extends(b,a);function b(c){if(c===void 0){c=null}return a.call(this,"resetButton","Reset",c,RenderTagElementType.SPAN,true,RenderClassType.ASCII_REAL_BUTTON)||this
}return b}(RenderTagElement));var Row=(function(b){__extends(a,b);function a(c){if(c===void 0){c=null
}var d=b.call(this,null,c)||this;d.size=0;return d}a.prototype.addSquare=function(c){if(this.size<a.CAPACITY){this.size++;
this.addElements(c,this.size==a.CAPACITY?RenderArea.getBrTagElement():new SquareSeparator())
}};a.prototype.addSquareSeparator=function(){this.addElements(new SquareSeparator())
};a.CAPACITY=3;return a}(RenderArea));var RowSeparator=(function(a){__extends(b,a);
function b(c){if(c===void 0){c=null}var d=a.call(this,null,c)||this;d.addElements(new RenderElement(null,"---+---+---"),RenderArea.getBrTagElement());
return d}return b}(RenderArea));var Square=(function(b){__extends(a,b);function a(e,d,c){if(e===void 0){e=null
}if(c===void 0){c=TicTacToeSign.NO_SIGN}var g=b.call(this,null,e)||this;g.index=d;
g.sign=c;var f="square".concat(d.toString());g.addElements(new RenderTagElement(f," ".concat(g.sign).concat(" "),g,RenderTagElementType.SPAN,true,RenderClassType.SQUARE,RenderClassType.CURSOR_POINTER));
g.addLinks(new RenderLinkClick("#".concat(f),new CallbackCollection(g.markSquare.bind(g))));
return g}a.prototype.markSquare=function(){if(this.sign==TicTacToeSign.NO_SIGN){this.setSign(TicTacToeSign.X);
var d=this.parent.getParent();var c=MinimaxAlgorithm.run(d.toArray(),TicTacToeSign.O);
if(c.score==0){if(c.index!=null){d.squares[c.index].setSign(TicTacToeSign.O)}else{this.setStatus(d,"You tied... (._.)")
}}else{if(c.score>0){if(c.index!=null){d.squares[c.index].setSign(TicTacToeSign.O)
}if(MinimaxAlgorithm.winning(d.toArray(),TicTacToeSign.O)){this.setStatus(d,"You lost... (;_;)")
}}else{}}}};a.prototype.setSign=function(c){this.sign=c;this.disable()};a.prototype.setStatus=function(d,f){var e=d.getParent();
var c=e.getStatus();c.setContent(f);c.update();d.squares.forEach(function(g){return g.disable()
})};a.prototype.disable=function(){var c=this.elements[0];c.setContent(" ".concat(this.sign).concat(" "));
c.addClass(RenderClassType.CURSOR_NOT_ALLOWED);c.removeClass(RenderClassType.CURSOR_POINTER);
this.removeAllLinks();this.update()};return a}(RenderArea));var SquareSeparator=(function(a){__extends(b,a);
function b(){return a.call(this,null,"|")||this}return b}(RenderElement));var Status=(function(b){__extends(a,b);
function a(c){if(c===void 0){c=null}return b.call(this,"status",null,c,RenderTagElementType.SPAN,true)||this
}a.prototype.reset=function(){this.setContent(null);this.update()};return a}(RenderTagElement));
var TicTacToeSign;(function(a){a.NO_SIGN=" ";a.X="X";a.O="O"})(TicTacToeSign||(TicTacToeSign={}));
var Title=(function(b){__extends(a,b);function a(c){if(c===void 0){c=null}var d=b.call(this,"title",c)||this;
d.addElements(d.getHorizontalBoundary(),RenderArea.getBrTagElement(),d.getVerticalBoundary(),new RenderElement(null,"ASCII Tic-Tac-Toe"),d.getVerticalBoundary(),RenderArea.getBrTagElement(),d.getHorizontalBoundary());
d.update();return d}a.prototype.getHorizontalBoundary=function(){return new RenderElement(null," +-------------------+ ")
};a.prototype.getVerticalBoundary=function(){return new RenderElement(null," | ")
};return a}(RenderArea));var Main;(function(c){var b=null;function a(){b=new Game()
}c.documentIsReady=a})(Main||(Main={}));$(document).ready(function(){Main.documentIsReady()
});